services:
  cs2_modded_server:
    build:
      context: .
      dockerfile: Dockerfile
    image: cs2-modded-server
    container_name: cs2-modded-server
    env_file:
      - .env
    volumes:
      - cs2-volume:/home/steam/
      - type: bind
        source: ./custom_files
        target: /home/custom_files/
    ports:
      # CS2 uses additional Steam/query/client ports derived from -port.
      # Expose the typical range so the server can be discovered in Steam server browser.
      - "27015-27020:27015-27020/tcp"
      - "27015-27020:27015-27020/udp"
    cpu_count: 2
    mem_limit: 3500m
    # command: tail -F anything

volumes:
  cs2-volume: